"use strict";function AnimCube3(t){var e,r,n,o,a,l,i,f,u,c,s,h,v,d,g,m,b,M,p,k,L,y,w,T,S,A,R,F,D,x,E,B,I,U,P,C,X,W,Y,z,q,O,Q,Z,N,H,G,K=[],j=[],J=[],V=[],$=[],_=[],tt=[[0,-1,0],[0,1,0],[0,0,-1],[0,0,1],[-1,0,0],[1,0,0]],et=[[-1,-1,-1],[1,-1,-1],[1,-1,1],[-1,-1,1],[-1,1,-1],[1,1,-1],[1,1,1],[-1,1,1]],rt=[[0,1,2,3],[4,7,6,5],[0,4,5,1],[2,6,7,3],[0,3,7,4],[1,5,6,2]],nt=[[0,3,2,1],[0,3,2,1],[3,2,1,0],[3,2,1,0],[0,3,2,1],[0,3,2,1]],ot=[[2,5,3,4],[4,3,5,2],[4,1,5,0],[5,1,4,0],[0,3,1,2],[2,1,3,0]],at=[1,1,-1,-1,-1,-1],lt=[0,0,-1],it=[1,0,0],ft=[],ut=[],ct=[],st=[],ht=!0,vt=[],dt=[],gt=[],mt=[],bt=[],Mt=!0,pt=-1,kt=6,Lt=12,yt=!0,wt=!1,Tt=!1,St=!1,At=0,Rt=0,Ft=0,Dt=0,xt=[3,2,0,5,1,4],Et=[[6,3,0,7,4,1,8,5,2],[2,5,8,1,4,7,0,3,6],[0,1,2,3,4,5,6,7,8],[0,1,2,3,4,5,6,7,8],[6,3,0,7,4,1,8,5,2],[0,1,2,3,4,5,6,7,8]];function Bt(){var t=Ut("config");null!=t?function(t){var e=new XMLHttpRequest;function r(){4==e.readyState&&(200==e.status?function(t){for(var e=t.split("\n"),r=0;r<e.length;r++){var n=e[r].split("=");void 0!==n[1]&&(K[n[0]]=n[1].trim())}}(e.responseText):console.log("Error loading config file: "+t),It())}e.onreadystatechange=r,e.open("GET",t,!0),e.send()}(t):It()}function It(){j[0]=Cr(255,128,64),j[1]=Cr(255,0,0),j[2]=Cr(0,255,0),j[3]=Cr(0,0,255),j[4]=Cr(153,153,153),j[5]=Cr(170,170,68),j[6]=Cr(187,119,68),j[7]=Cr(153,68,68),j[8]=Cr(68,119,68),j[9]=Cr(0,68,119),j[10]=Cr(255,255,255),j[11]=Cr(255,255,0),j[12]=Cr(255,96,32),j[13]=Cr(208,0,0),j[14]=Cr(0,144,0),j[15]=Cr(32,64,208),j[16]=Cr(176,176,176),j[17]=Cr(80,80,80),j[18]=Cr(255,0,255),j[19]=Cr(0,255,255),j[20]=Cr(255,160,192),j[21]=Cr(32,255,16),j[22]=Cr(0,0,0),j[23]=Cr(128,128,128);var t=Ut("bgcolor");if(e=null!=t&&6==t.length&&Wr(t)?"#"+t:"gray",t=Ut("butbgcolor"),o=null!=t&&6==t.length&&Wr(t)?"#"+t:e,null!=(t=Ut("colors")))for(var u=0;u<10&&u<t.length/6;u++)Wr(t.substring(6*u,6*u+6))&&(j[u]="#"+t.substring(6*u,6*u+6));for(u=0;u<6;u++)for(var c=0;c<9;c++)J[u][c]=u+10;if(null!=(t=Ut("supercube"))&&"1"==t){Tt=!0,Pt(.06);for(u=0;u<9;u++)J[0][u]=22;null!=(t=Ut("scw"))&&("1"==t?Ft=1:"2"==t&&(Ft=2)),1==Ft&&(j[10]="#000000")}if(null!=(t=Ut("gabbacolors"))&&"1"==t&&(1==Tt?(j[11]="#fdcf00",j[12]="#fd4e0a",j[13]="#93000d",j[14]="#00702d",j[15]="#00347a"):(Pt(.06),j[11]="#ffd90a",j[12]="#ff4f0b",j[13]="#9e0b19",j[14]="#0b7d39",j[15]="#0b4186")),null!=(t=Ut("borderwidth"))){for(u=0;u<t.length;u++)t.charAt(u)>="0"&&t.charAt(u)<="9"&&(Dt=10*Dt+parseInt(t[u]));Dt>=0&&Dt<=20&&Pt(Dt/100)}if(Tt)for(u=0;u<6;u++)for(c=0;c<9;c++)V[u][c]=0;var s="lluu";if(null!=(t=Ut("colorscheme"))&&6==t.length)for(u=0;u<6;u++){var h=23;for(c=0;c<23;c++)if(t[u].toLowerCase()=="0123456789wyorgbldmcpnk".charAt(c)){h=c;break}for(c=0;c<9;c++)J[u][c]=h}if("1"==(t=Ut("scramble"))?At=1:"2"==t&&(At=2),0==At){if(null!=(t=Ut("pos"))&&54==t.length){s="uuuuff","gray"==e&&(e="white");for(u=0;u<6;u++){var g=xt[u];for(c=0;c<9;c++){var m=Et[u][c];J[g][m]=23;for(var b=0;b<14;b++)if(t.charAt(9*u+c)=="DFECABdfecabgh".charAt(b)){J[g][m]=b+4;break}}}}if(null!=(t=Ut("facelets"))&&54==t.length)for(u=0;u<6;u++)for(c=0;c<9;c++){J[u][c]=23;for(b=0;b<23;b++)if(t[9*u+c].toLowerCase()=="0123456789wyorgbldmcpnk".charAt(b)){J[u][c]=b;break}}if(null!=(t=Ut("superfacelets"))&&54==t.length)for(u=0;u<6;u++)for(c=0;c<9;c++)for(b=0;b<4;b++)if(t[9*u+c].toLowerCase()=="0123".charAt(b)){V[u][c]=b;break}}if(N=0,G=!1,!1,null!=(t=Ut("sign"))&&"1"==t&&(!0,N=5,G=!0),null!=(t=Ut("yz"))&&("0"==t?G=!1:"1"==t&&(G=!0)),null!=(t=Ut("randmoves"))){var L=0;for(u=0;u<t.length;u++)t.charAt(u)>="0"&&t.charAt(u)<="9"&&(L=10*L+parseInt(t[u]));L>0&&(Rt=L)}("random"==(t=Ut("move"))||At>0)&&(t=Rn(3,Rt)),vt=null==t?[]:Wt(t,!0),C=0,q=-1,0==At&&(null!=(t=Ut("initmove"))&&("random"==t&&(t=Rn(3,Rt)),gt="#"==t?vt:Wt(t,!1)),null!=(t=Ut("initrevmove"))&&("random"==t&&(t=Rn(3,Rt)),mt="#"==t?vt:Wt(t,!1)),null!=(t=Ut("demo"))&&("random"==t&&(t=Rn(3,Rt)),(dt="#"==t?vt:Wt(t,!0)).length>0&&dt[0].length>0&&(S=!0))),t=Ut("position"),Rr(Br(ft,lt,it)),null==t&&(t=s);var y=Math.PI/12;for(u=0;u<t.length;u++){var w=y;switch(t[u].toLowerCase()){case"d":w=-w;case"u":Ur(lt,w),Ur(it,w);break;case"f":w=-w;case"b":Pr(lt,w),Pr(it,w);break;case"l":w=-w;case"r":Ir(lt,w),Ir(it,w)}}if(Rr(Br(ft,lt,it)),v=0,d=0,null!=(t=Ut("speed")))for(u=0;u<t.length;u++)t.charAt(u)>="0"&&t.charAt(u)<="9"&&(v=10*v+parseInt(t[u]));if(null!=(t=Ut("doublespeed")))for(u=0;u<t.length;u++)t.charAt(u)>="0"&&t.charAt(u)<="9"&&(d=10*d+parseInt(t[u]));if(0==v&&(v=10),0==d&&(d=3*v/2),A=0,null==(t=Ut("perspective")))A=2;else for(u=0;u<t.length;u++)t.charAt(u)>="0"&&t.charAt(u)<="9"&&(A=10*A+parseInt(t[u]));var T,P=0;if(null!=(t=Ut("scale")))for(u=0;u<t.length;u++)t.charAt(u)>="0"&&t.charAt(u)<="9"&&(P=10*P+parseInt(t[u]));if(R=1/(1+P/10),D=!1,null!=(t=Ut("hint"))){D=!0,x=0;for(u=0;u<t.length;u++)t.charAt(u)>="0"&&t.charAt(u)<="9"&&(x=10*x+parseInt(t[u]));x<1?D=!1:x/=10}(E=3.7,null!=(t=Ut("hinthoriz")))&&((T=parseFloat(t))>0&&(E=T));(B=3.7,null!=(t=Ut("hintvert")))&&((T=parseFloat(t))>0&&(B=T));(I=0,null!=(t=Ut("hintborder"))&&"1"==t&&(I=1),Q=13,null!=(t=Ut("buttonheight")))&&((T=parseInt(t))>=9&T<=25&&(Q=T));(kt=0==vt.length?0:6,O=1,"0"==(t=Ut("buttonbar"))?(O=0,Q=0,kt=0):"1"==t?O=1:"2"!=t&&0!=vt.length||(O=2,kt=0),t=Ut("edit"),M="0"!=t,t=Ut("repeat"),p="0"!=t,t=Ut("clickprogress"),k="0"!=t,(t=Ut("movetext"))>=1&&t<=5&&(N=parseInt(t)),H=1,"0"==(t=Ut("movetextspace"))&&(H=0),null!=(t=Ut("textsize")))&&((T=parseInt(t))>=5&T<=40&&(Lt=T));(t=Ut("fonttype"),yt=null==t||"1"==t,z=0,null!=(t=Ut("metric"))&&("1"==t?z=1:"2"==t?z=2:"3"==t&&(z=3)),F=1,null!=(t=Ut("align")))&&((T=parseInt(t))>=0&T<=3&&(F=T),T>=3&T<=99&&(F=T/100));null!=(t=Ut("snap"))&&"1"==t&&(wt=!0);for(u=0;u<6;u++)for(c=0;c<9;c++)$[u][c]=J[u][c],_[u][c]=V[u][c];gt.length>0&&Vt(J,gt[0],0,gt[0].length,!1),mt.length>0&&Vt(J,mt[0],0,mt[0].length,!0),2==At&&Vt(J,vt[0],0,vt[0].length,!0);for(u=0;u<3;u++)ut[u]=lt[u],ct[u]=it[u],st[u]=ft[u];$r(e)<128?(n="white",r=function(t){"#"!=t.substring(0,1)&&(t=Vr(t));var e=parseInt(t.substring(1,3),16),r=parseInt(t.substring(3,5),16),n=parseInt(t.substring(5,7),16);return e=Math.floor(1.3*e),r=Math.floor(1.3*r),n=Math.floor(1.3*n),Cr(e>255?255:e,r>255?255:r,n>255?255:n)}(e)):(n="black",r=_r(e)),i=$r(o)<128?"white":"black",a=n,null!=(t=Ut("slidercolor"))&&6==t.length&&Wr(t)&&(a="#"+t),l=_r(e),null!=(t=Ut("sliderbgcolor"))&&6==t.length&&Wr(t)&&(l="#"+t),null!=(t=Ut("troughcolor"))&&6==t.length&&Wr(t)&&(l="#"+t),f="black",null!=(t=Ut("cubecolor"))&&6==t.length&&Wr(t)&&(f="#"+t),U=1,"0"==(t=Ut("counter"))&&(U=0),q=vt.length>0&&vt[0][0]>=1e3?0:-1,hn=sn.getContext("2d"),mn=Q,bn=kt,Mn=Lt,An(),pn.appendChild(sn),ur(),S&&te(-1)}function Ut(t){var e=Fn[t];return void 0===e?K[t]:e}function Pt(t){br[0][0]=br[0][1]=br[1][1]=br[3][0]=t,br[1][0]=br[2][0]=br[2][1]=br[3][1]=1-t}var Ct=[0,0,0,0,0,0,1,1,1,3,3,3,3,3,3,2,2,2,2,2,2],Xt=[0,1,2,3,4,5,1,2,4,5,2,0,5,2,0,0,1,2,3,4,5];function Wt(t,e){if(e){for(var r=t.indexOf("{");-1!=r;)r=t.indexOf("{",r+1);if(null==bt)q=0,bt=[];else{for(var n=[],o=0;o<bt.length;o++)n[o]=bt[o];q=bt.length,bt=n}}var a=1;for(r=t.indexOf(";");-1!=r;)a++,r=t.indexOf(";",r+1);var l=[],i=0;for(r=t.indexOf(";"),a=0;-1!=r;)l[a]=zt(t.substring(i,r),e,a++),i=r+1,r=t.indexOf(";",i);return l[a]=zt(t.substring(i),e,a),l}var Yt=["m","t","c","s","a"];function zt(t,e,r){if("#"==t.trim()&&void 0!==vt[r])return vt[r];var n=0,o=[],a="UDFBLRESMXYZxyzudfblr";1==G&&(a="UDFBLRESMXZYxzyudfblr");for(var l=0;l<t.length;l++)if("."==t.charAt(l))o[n]=-1,n++;else if("{"==t.charAt(l)){l++;for(var i="";l<t.length&&"}"!=t.charAt(l);)e&&(i+=t.charAt(l)),l++;e&&(bt[q]=i,o[n]=1e3+q,q++,n++)}else for(var f=0;f<21;f++)if(t.charAt(l)==a.charAt(f)){l++;var u=Ct[f];if(o[n]=24*Xt[f],l<t.length&&0==Ct[f])for(var c=0;c<Yt.length;c++)if(t.charAt(l)==Yt[c]){u=c+1,l++;break}o[n]+=4*u,l<t.length&&("1"==t.charAt(l)?l++:"'"==t.charAt(l)||"3"==t.charAt(l)?(o[n]+=2,l++):"2"==t.charAt(l)&&(++l<t.length&&"'"==t.charAt(l)?(o[n]+=3,l++):o[n]+=1)),n++,l--;break}return o}function qt(t,e,r){if(e>=t.length)return"";for(var n="",o=e;o<r;o++){var a=Zt(t,o);""!=a&&(n+=a+(H?" ":""))}return n}var Ot=[[["U","D","F","B","L","R"],["Um","Dm","Fm","Bm","Lm","Rm"],["Ut","Dt","Ft","Bt","Lt","Rt"],["Uc","Dc","Fc","Bc","Lc","Rc"],["Us","Ds","Fs","Bs","Ls","Rs"],["Ua","Da","Fa","Ba","La","Ra"]],[["U","D","F","B","L","R"],["~E","E","S","~S","M","~M"],["u","d","f","b","l","r"],["Z","~Z","Y","~Y","~X","X"],["Us","Ds","Fs","Bs","Ls","Rs"],["Ua","Da","Fa","Ba","La","Ra"]],[["U","D","F","B","L","R"],["~E","E","S","~S","M","~M"],["u","d","f","b","l","r"],["Y","~Y","Z","~Z","~X","X"],["Us","Ds","Fs","Bs","Ls","Rs"],["Ua","Da","Fa","Ba","La","Ra"]],[["U","D","F","B","L","R"],["u","d","f","b","l","r"],["Uu","Dd","Ff","Bb","Ll","Rr"],["QU","QD","QF","QB","QL","QR"],["UD'","DU'","FB'","BF'","LR'","RL'"],["UD","DU","FB","BF","LR","RL"]],[["U","D","F","B","L","R"],["~E","E","S","~S","M","~M"],["u","d","f","b","l","r"],["y","~y","z","~z","~x","x"],["Us","Ds","Fs","Bs","Ls","Rs"],["Ua","Da","Fa","Ba","La","Ra"]]],Qt=["","2","'","2'"];function Zt(t,e){if(e>=t.length)return"";if(t[e]>=1e3)return"";if(-1==t[e])return".";var r=Ot[N-1][Math.floor(t[e]/4)%6][Math.floor(t[e]/24)];return"~"==r.charAt(0)?r.substring(1)+Qt[(t[e]+2)%4]:r+Qt[t[e]%4]}var Nt=["","q","h","s"];function Ht(t){for(var e=0,r=0;r<t.length;r++)t[r]<1e3&&e++;return e}function Gt(t,e){for(var r=0,n=0;;){for(;r<t.length&&t[r]>=1e3;)r++;if(n==e)break;r<t.length&&(n++,r++)}return r}function Kt(t,e){for(var r=0,n=0;n<t.length&&(n<e||e<0);n++)r+=jt(t[n]);return r}function jt(t){if(t<0||t>=1e3)return 0;var e=t%4,r=Math.floor(t/4)%6,n=1;switch(z){case 1:1!=e&&3!=e||(n*=2);case 2:1!=r&&4!=r&&5!=r||(n*=2);case 3:3==r&&(n=0),3!=z||4!=r&&5!=r||(n*=2)}return n}function Jt(t){q=t.length>0&&t[0]>=1e3?t[0]-1e3:-1}function Vt(t,e,r,n,o){for(var a=o?r+n:r;;){if(o){if(a<=r)break;a--}if(e[a]>=1e3)q=o?-1:e[a]-1e3;else if(e[a]>=0){var l=e[a]%4+1,i=Math.floor(e[a]/4)%6;4==l&&(l=2),o&&(l=4-l),ve(t,Math.floor(e[a]/24),l,i)}if(!o&&++a>=r+n)break}}var $t=0,_t=0;function te(t){if(ee(),(S||0!=vt.length&&0!=vt[P].length)&&(!S||0!=dt.length&&0!=dt[0].length)){switch(X=1,W=!1,Y=!0,t){case 0:break;case 1:X=-1;break;case 2:W=!0;break;case 3:X=-1,W=!0;break;case 4:Y=!1}tn($t++,X)}}function ee(){1==w&&(m=!0)}function re(){C=0,ht=!0,b=!1;for(var t=0;t<6;t++)for(var e=0;e<9;e++)J[t][e]=$[t][e],V[t][e]=_[t][e];gt.length>0&&void 0!==gt[P]&&Vt(J,gt[P],0,gt[P].length,!1),mt.length>0&&void 0!==mt[P]&&Vt(J,mt[P],0,mt[P].length,!0),vt.length>0&&Jt(vt[P]),At>0&&(vt=Wt(Rn(3,Rt),!1)),2==At&&Vt(J,vt[0],0,vt[0].length,!0);for(t=0;t<3;t++)lt[t]=ut[t],it[t]=ct[t],ft[t]=st[t];setTimeout(ur,0)}var ne=[[[0,3],[0,3]],[[0,3],[0,3]],[[0,3],[0,3]],[[0,3],[0,3]],[[0,3],[0,3]],[[0,3],[0,3]]],oe=[],ae=[],le=[],ie=[[[0,0],[0,0]],[[0,3],[0,3]],[[0,3],[0,1]],[[0,1],[0,3]],[[0,3],[2,3]],[[2,3],[0,3]]],fe=[[[0,0],[0,0]],[[0,3],[1,2]],[[1,2],[0,3]]],ue=[[1,0,3,3,2,3],[0,1,5,5,4,5],[2,3,1,0,3,2],[4,5,0,1,5,4],[3,2,2,4,1,0],[5,4,4,2,0,1]],ce=[[0,0,2,2,1,2],[0,0,2,2,1,2],[1,2,0,0,2,1],[1,2,0,0,2,1],[2,1,1,1,0,0],[2,1,1,1,0,0]],se=[[0,1,5,5,4,5],[1,0,3,3,2,3],[4,5,0,1,5,4],[2,3,1,0,3,2],[5,4,4,2,0,1],[3,2,2,4,1,0]];function he(t){for(var e=0;e<6;e++)oe[e]=ie[ue[t][e]],le[e]=ie[se[t][e]],ae[e]=fe[ce[t][e]];ht=!1}function ve(t,e,r,n){switch(n){case 3:ke(t,1^e,r,!1);case 2:ke(t,e,4-r,!1);case 1:ke(t,e,4-r,!0);break;case 5:ke(t,1^e,4-r,!1),ke(t,e,4-r,!1);break;case 4:ke(t,1^e,r,!1);default:ke(t,e,4-r,!1)}}var de=[0,1,2,5,8,7,6,3],ge=[1,3,-1,-3,1,3,-1,-3],me=[0,2,8,6,3,1,5,7],be=[[3,3,3,0],[2,1,1,1],[3,3,0,0],[2,1,1,2],[3,2,0,0],[2,2,0,1]],Me=[[7,7,7,4],[6,5,5,5],[7,7,4,4],[6,5,5,6],[7,6,4,4],[6,6,4,5]],pe=[];function ke(t,e,r,n){Le(t,e,r,n),1==Tt&&r>0&&r<4&&(Le(V,e,r,n),function(t,e,r){if(0==r)for(var n=0;n<9;n++)V[t][n]=(V[t][n]+4-e)%4;4==t&&(0==r&&(xe(6,1,3),1==e?xe(0,1,1):2==e?xe(0,1,2):3==e&&xe(0,3,0)),1==r&&(xe(3,1,3),1==e?xe(3,1,1):2==e?xe(3,1,2):3==e&&xe(1,3,0)));5==t&&(0==r&&(xe(0,1,3),1==e?xe(2,3,0):2==e?xe(6,1,2):3==e&&xe(6,1,1)),1==r&&(xe(3,1,3),1==e?xe(1,3,0):2==e?xe(3,1,2):3==e&&xe(3,1,1)));0==r&&(2==t&&Ee(0,4-e),3==t&&Ee(1,e));1==r&&(2==t&&Ee(2,4-e),3==t&&Ee(2,e))}(e,r,n))}function Le(t,e,r,n){if(!n){for(var o=0;o<8;o++)pe[(o+2*r)%8]=t[e][de[o]];for(o=0;o<8;o++)t[e][de[o]]=pe[o]}var a=3*r;for(o=0;o<4;o++)for(var l=ot[e][o],i=n?Me[e][o]:be[e][o],f=ge[i],u=me[i],c=0;c<3;c++,a++)pe[a%12]=t[l][c*f+u];for(o=0,a=0;o<4;o++)for(l=ot[e][o],i=n?Me[e][o]:be[e][o],f=ge[i],u=me[i],c=0;c<3;c++,a++)t[l][c*f+u]=pe[a]}var ye,we,Te,Se,Ae,Re,Fe,De=[[[0,1,0],[0,3,1],[0,3,4],[0,1,5]],[[6,1,0],[2,3,1],[2,3,4],[6,1,5]],[[3,1,0],[1,3,1],[1,3,4],[3,1,5]]];function xe(t,e,r){for(var n=t,o=0;o<3;n+=e,o++)V[r][n]=(V[r][n]+2)%4}function Ee(t,e){for(var r=0;r<4;r++)for(var n=De[t][r],o=n[0],a=0;a<3;o+=n[1],a++)V[n[2]][o]=(V[n[2]][o]+e)%4}var Be,Ie,Ue=[],Pe=[],Ce=[],Xe=[],We=[[[0,0],[3,0],[3,1],[0,1]],[[3,0],[3,3],[2,3],[2,0]],[[3,3],[0,3],[0,2],[3,2]],[[0,3],[0,0],[1,0],[1,3]],[[0,1],[3,1],[3,2],[0,2]],[[2,0],[2,3],[1,3],[1,0]]],Ye=[[1,0],[0,1],[-1,0],[0,-1],[1,0],[0,1]],ze=[[1,1,1,1,1,-1],[1,1,1,1,1,-1],[1,-1,1,-1,1,1],[1,-1,1,-1,-1,1],[-1,1,-1,1,-1,-1],[1,-1,1,-1,1,1]],qe=[],Oe=[],Qe=[[[1,0,0],[0,0,0],[0,0,1]],[[1,0,0],[0,1,0],[0,0,0]],[[0,0,0],[0,1,0],[0,0,1]]],Ze=[[[0,0,1],[0,0,0],[-1,0,0]],[[0,1,0],[-1,0,0],[0,0,0]],[[0,0,0],[0,0,1],[0,-1,0]]],Ne=[[[0,0,0],[0,1,0],[0,0,0]],[[0,0,0],[0,0,0],[0,0,1]],[[1,0,0],[0,0,0],[0,0,0]]],He=[1,-1,1,-1,1,-1],Ge=[],Ke=[],je=[],Je=[],Ve=[],$e=[],_e=[],tr=[],er=[],rr=[],nr=[],or=[],ar=[[1,0,0],[0,1,0],[1,1,0],[1,1,1],[1,0,1],[1,0,2]],lr=[],ir=[[0,2,2],[2,1,2],[2,2,2],[2,2,2],[2,2,2],[2,2,2]],fr=[[0,1,2],[2,1,0],[0,2,1]];function ur(){if(hn.save(),hn.fillStyle=e,1!=O||0!=kt&&!S&&0!=vt[P].length?(Yr(hn,0,0,ye,we),hn.fillRect(0,0,ye,we)):(Yr(hn,0,0,ye,we-vn),hn.fillRect(0,0,ye,we-vn)),Fe=0,ht)kr(lt,it,ft,ne,3);else{for(var t=Math.cos(h+s),n=Math.sin(h+s)*He[u],f=0;f<3;f++){Ge[f]=0,Ke[f]=0;for(var v=0;v<3;v++){var d=Math.floor(u/2);Ge[f]+=lt[v]*(Ne[d][f][v]+Qe[d][f][v]*t+Ze[d][f][v]*n),Ke[f]+=it[v]*(Ne[d][f][v]+Qe[d][f][v]*t+Ze[d][f][v]*n)}}Br(je,Ge,Ke);var g=Math.cos(h-s),m=Math.sin(h-s)*He[u];for(f=0;f<3;f++){Je[f]=0,Ve[f]=0;for(v=0;v<3;v++){d=Math.floor(u/2);Je[f]+=lt[v]*(Ne[d][f][v]+Qe[d][f][v]*g+Ze[d][f][v]*m),Ve[f]+=it[v]*(Ne[d][f][v]+Qe[d][f][v]*g+Ze[d][f][v]*m)}}Br($e,Je,Ve),rr[0]=lt,nr[0]=it,or[0]=ft,rr[1]=Ge,nr[1]=Ke,or[1]=je,rr[2]=Je,nr[2]=Ve,or[2]=$e,lr[0]=oe,lr[1]=ae,lr[2]=le,Er(Fr(Ar(_e,lt),5+A),Fr(Ar(er,tt[u]),1/3)),Er(Fr(Ar(tr,lt),5+A),Fr(Ar(er,tt[1^u]),1/3));var b,M=Dr(_e,tt[u]),p=Dr(tr,tt[1^u]);b=M<0&&p>0?0:M>0&&p<0?1:2;for(f=0;f<3;f++){v=fr[b][f];var k=ar[c][v];kr(rr[k],nr[k],or[k],lr[v],ir[c][v])}}if(Z||w||(pt=-1),!(At>0&&2==O)){if(!S&&vt.length>0){if(vt[P].length>0){if(kt>0){hn.lineWidth=gn,hn.strokeStyle=i;var L=(ye-2)*function(t,e){for(var r=0,n=0;n<e;n++)t[n]<1e3&&r++;return r}(vt[P],C)/Ht(vt[P]);hn.fillStyle=l,hn.fillRect(dn,we-kt-dn,ye-vn,kt),hn.fillStyle=a,hn.fillRect(dn,we-kt-dn,L,kt),hn.beginPath(),hn.rect(dn,we-kt-dn,ye-vn,kt),hn.stroke()}hn.font="bold "+Lt+"px helvetica";var y=Kt(vt[P],C)+"/"+Kt(vt[P],-1)+Nt[z],T=hn.measureText(y).width,R=ye-T-2,F=we-kt-Math.floor(4*vn);N>0?(U&&Tr(hn,y,yt?R-vn:R,F-Lt),function(t,e){var n=0==C?Gt(vt[P],C):C,o=qt(vt[P],0,n),a=Zt(vt[P],n),l=qt(vt[P],n+1,vt[P].length);H&&(""==a&&(o=o.substr(0,o.length-1)),""!=l&&(l=" "+l.substr(0,l.length-1)));var i=t.measureText(o).width,f=t.measureText(a).width,u=t.measureText(l).width,c=1;c+i+f+u>ye&&(c=Math.min(1,ye/2-i-f/2),c=Math.max(c,ye-i-f-u-2));f>0&&(t.fillStyle=r,t.lineWidth=2,t.strokeStyle="black",t.beginPath(),Mn<=14?t.fillRect(c+i-1,we-kt-Lt-Math.floor(4*vn),f+2,Lt+Math.floor(3*vn)):t.fillRect(c+i-1,we-kt-Lt-Math.floor(2*vn),f+2,Lt+Math.floor(vn)));i>0&&Tr(t,o,c,e);f>0&&Tr(t,a,c+i,e);u>0&&Tr(t,l,c+i+f,e)}(hn,F)):U&&Tr(hn,y,yt?R-vn:R,F)}if(vt.length>1){hn.font="bold "+Lt+"px helvetica";y=P+1+"/"+vt.length,T=hn.measureText(y).width,R=ye-T-2*Q-Math.floor(5*vn);Tr(hn,y,R,cr()),qr(hn,7,ye-2*Q,0),qr(hn,8,ye-Q,0)}}q>=0&&(hn.font="bold "+Lt+"px helvetica",Tr(hn,bt[q],yt?vn:0,cr()))}hn.restore(),Mt&&0!=O&&function(t){var e=Q%2==0?1:0;if(e+=Math.floor(vn+.5)-1,2==O)return t.fillStyle=0==pt||At>0&&6==pt?_r(o):o,t.fillRect(dn,we-Q,Q,Q),t.lineWidth=gn,t.strokeStyle=i,t.beginPath(),t.rect(dn,we-Q-dn,Q,Q),t.stroke(),void qr(t,0,Q/2,we-(Q+1)/2-e);if(1==O){for(var r=0,n=0;n<7;n++){var a=Math.floor((ye-r)/(7-n));t.fillStyle=pt==n?_r(o):o,t.fillRect(r,we,a,Q),t.lineWidth=gn,t.strokeStyle=i,t.beginPath(),0==n?t.rect(r+dn,we-dn,a-vn,Q):t.rect(r-dn,we-dn,a,Q),t.stroke(),t.strokeStyle="black",qr(t,n,r+a/2,we+Q/2-e),r+=a}Mt=!1}}(hn)}function cr(){return Mn<10?Math.floor(10*vn):Mn<12?Math.floor(12*vn):Mn<14?Math.floor(14*vn):Lt}var sr=[],hr=[],vr=[],dr=[],gr=[[],[],[],[],[],[]],mr=[[],[],[],[],[],[]],br=[[.1,.1],[.9,.1],[.9,.9],[.1,.9]],Mr=[[0,0],[0,1],[1,1],[1,0]],pr=[];function kr(t,e,r,n,o){for(var a=0;a<8;a++){var l=(s=ye<we?ye:we-kt)/3.7*Dr(et[a],e)*R,i=s/3.7*Dr(et[a],r)*R;l/=1-(h=s/(5+A)*Dr(et[a],t)*R)/s,i/=1-h/s,vr[a]=ye/2+l,dr[a]=0==F?(we-kt)/2*R-i:1==F?(we-kt)/2-i:2==F?we-kt-(we-kt)/2*R-i:(we-kt)*(F*(1-R)+R/2)-i}for(a=0;a<6;a++)for(var c=0;c<4;c++)gr[a][c]=vr[rt[a][c]],mr[a][c]=dr[rt[a][c]];if(D)for(a=0;a<6;a++)if(Er(Fr(Ar(_e,t),5+A),tt[a]),Dr(_e,tt[a])<0){Fr(Ar(pr,tt[a]),x);var s,h;l=(s=ye<we?ye:we-kt)/E*Dr(pr,e),i=s/B*Dr(pr,r);l/=1-(h=s/(5+A)*Dr(pr,t))/s,i/=1-h/s;var v=n[a][0][1]-n[a][0][0],d=n[a][1][1]-n[a][1][0];if(v>0&&d>0)for(var g=0,m=n[a][1][0];g<d;g++,m++)for(var p=0,k=n[a][0][0];p<v;p++,k++){for(c=0;c<4;c++)Lr(a,c,sr,hr,k+br[c][0],m+br[c][1],b),sr[c]=Math.floor(sr[c]+(b?-l:l)),hr[c]=Math.floor(hr[c]-i);1==Tt?(Hr(hn,sr,hr,"#fdfdfd"),Nr(hn,sr,hr,I?_r("#fdfdfd"):"#fdfdfd"),Jr(hn,sr,hr,a,V[a][3*m+k],j[J[a][3*m+k]])):(Hr(hn,sr,hr,j[J[a][3*m+k]]),Nr(hn,sr,hr,I?_r(j[J[a][3*m+k]]):j[J[a][3*m+k]]))}}for(a=0;a<6;a++){v=n[a][0][1]-n[a][0][0],d=n[a][1][1]-n[a][1][0];if(v<=0||d<=0){for(c=0;c<4;c++){var L=nt[a][c];sr[c]=Math.floor(gr[a][c]+2*(gr[1^a][L]-gr[a][c])/3),hr[c]=Math.floor(mr[a][c]+2*(mr[1^a][L]-mr[a][c])/3),b&&(sr[c]=ye-sr[c])}Hr(hn,sr,hr,f)}else{for(c=0;c<4;c++)Lr(a,c,sr,hr,n[a][0][Mr[c][0]],n[a][1][Mr[c][1]],b);Hr(hn,sr,hr,f)}}for(a=0;a<6;a++)if(Er(Fr(Ar(_e,t),5+A),tt[a]),Dr(_e,tt[a])>0){v=n[a][0][1]-n[a][0][0],d=n[a][1][1]-n[a][1][0];if(v>0&&d>0)for(g=0,m=n[a][1][0];g<d;g++,m++)for(p=0,k=n[a][0][0];p<v;p++,k++){for(c=0;c<4;c++)Lr(a,c,sr,hr,k+br[c][0],m+br[c][1],b);1==Tt?(Nr(hn,sr,hr,"#fdfdfd"),Hr(hn,sr,hr,"#fdfdfd"),Jr(hn,sr,hr,a,V[a][3*m+k],j[J[a][3*m+k]])):(Nr(hn,sr,hr,j[J[a][3*m+k]]),Hr(hn,sr,hr,j[J[a][3*m+k]]))}if(!M||w)continue;var y=(gr[a][1]-gr[a][0]+gr[a][2]-gr[a][3])/6,T=(gr[a][3]-gr[a][0]+gr[a][2]-gr[a][1])/6,S=(mr[a][1]-mr[a][0]+mr[a][2]-mr[a][3])/6,U=(mr[a][3]-mr[a][0]+mr[a][2]-mr[a][1])/6;if(3==o)for(c=0;c<6;c++){for(L=0;L<4;L++)Lr(a,L,Ue[Fe],Pe[Fe],We[c][L][0],We[c][L][1],!1);if(Ce[Fe]=(y*Ye[c][0]+S*Ye[c][1])*ze[a][c],Xe[Fe]=(T*Ye[c][0]+U*Ye[c][1])*ze[a][c],qe[Fe]=ot[a][c%4],c>=4&&(qe[Fe]&=-2),Oe[Fe]=Math.floor(c/4),18==++Fe)break}else if(0==o){if(a!=u&&v>0&&d>0){for(c=3==v?0==n[a][1][0]?0:2:0==n[a][0][0]?3:1,L=0;L<4;L++)Lr(a,L,Ue[Fe],Pe[Fe],We[c][L][0],We[c][L][1],!1);Ce[Fe]=(y*Ye[c][0]+S*Ye[c][1])*ze[a][c],Xe[Fe]=(T*Ye[c][0]+U*Ye[c][1])*ze[a][c],qe[Fe]=u,Oe[Fe]=0,Fe++}}else if(1==o&&a!=u&&v>0&&d>0){for(c=3==v?4:5,L=0;L<4;L++)Lr(a,L,Ue[Fe],Pe[Fe],We[c][L][0],We[c][L][1],!1);Ce[Fe]=(y*Ye[c][0]+S*Ye[c][1])*ze[a][c],Xe[Fe]=(T*Ye[c][0]+U*Ye[c][1])*ze[a][c],qe[Fe]=u,Oe[Fe]=1,Fe++}}}function Lr(t,e,r,n,o,a,l){o/=3,a/=3;var i=gr[t][0]+(gr[t][1]-gr[t][0])*o,f=mr[t][0]+(mr[t][1]-mr[t][0])*o,u=gr[t][3]+(gr[t][2]-gr[t][3])*o,c=mr[t][3]+(mr[t][2]-mr[t][3])*o;r[e]=Math.floor(.5+i+(u-i)*a),n[e]=Math.floor(.5+f+(c-f)*a),l&&(r[e]=ye-r[e])}var yr=[1,1,-1,-1,-1,1,1,-1,-1,0,1,0,0,1,0,-1],wr=[];function Tr(t,e,r,o){if(yt){t.fillStyle="black";for(var a=0;a<wr.length;a+=2)t.fillText(e,r+wr[a],o+wr[a+1]);t.fillStyle="white"}else t.fillStyle=n;t.fillText(e,r,o)}var Sr=[-1,3,1,-1,0,2,4,-1];function Ar(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function Rr(t){var e=Math.sqrt(Dr(t,t));return t[0]/=e,t[1]/=e,t[2]/=e,t}function Fr(t,e){return t[0]*=e,t[1]*=e,t[2]*=e,t}function Dr(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function xr(t,e){return t[0]+=e[0],t[1]+=e[1],t[2]+=e[2],t}function Er(t,e){return t[0]-=e[0],t[1]-=e[1],t[2]-=e[2],t}function Br(t,e,r){return t[0]=e[1]*r[2]-e[2]*r[1],t[1]=e[2]*r[0]-e[0]*r[2],t[2]=e[0]*r[1]-e[1]*r[0],t}function Ir(t,e){var r=Math.sin(e),n=Math.cos(e),o=t[1]*n-t[2]*r,a=t[1]*r+t[2]*n;return t[1]=o,t[2]=a,t}function Ur(t,e){var r=Math.sin(e),n=Math.cos(e),o=t[0]*n-t[2]*r,a=t[0]*r+t[2]*n;return t[0]=o,t[2]=a,t}function Pr(t,e){var r=Math.sin(e),n=Math.cos(e),o=t[0]*n-t[1]*r,a=t[0]*r+t[1]*n;return t[0]=o,t[1]=a,t}function Cr(t,e,r){return"#"+Xr(t.toString(16))+Xr(e.toString(16))+Xr(r.toString(16))}function Xr(t){return("00"+t).substring(t.length)}function Wr(t){for(var e=0,r=0;r<6;r++)for(var n=0;n<16;n++)if(t[r].toLowerCase()=="0123456789abcdef".charAt(n)){e++;break}return 6==e}function Yr(t,e,r,n,o){t.beginPath(),t.moveTo(e,r),t.lineTo(e+n,r),t.lineTo(e+n,r+o),t.lineTo(e,r+o),t.lineTo(e,r),t.closePath(),t.clip()}var zr=[];function qr(t,e,r,n){switch(r=Math.floor(r),n=Math.floor(n),e){case 0:Qr(t,r-zr[4],n-zr[3],zr[3],zr[6]+1),Or(t,r+zr[4],n,-1);break;case 1:Qr(t,r+zr[1],n-zr[3],zr[3],zr[6]+1),Or(t,r-zr[1],n,-1);break;case 2:Or(t,r+zr[1],n,-1);break;case 3:w?Qr(t,r-zr[4],n-zr[3],zr[7],zr[7]):(Qr(t,r-zr[4],n-zr[2],zr[7],zr[5]),Qr(t,r-zr[2],n-zr[4],zr[3],zr[9]));break;case 4:Or(t,r-zr[2],n,1);break;case 5:Qr(t,r-zr[4],n-zr[3],zr[3],zr[6]+1),Or(t,r,n,1);break;case 6:Qr(t,r+zr[1],n-zr[3],zr[3],zr[6]+1),Or(t,r-zr[4],n,1);break;case 7:var a=7==pt?_r(o):o;Zr(t,r-2*vn,n+vn,Q,n+Q,a),Or(t,r+2*vn+Q/2-3*vn,n+Q/2+dn,-1);break;case 8:a=8==pt?_r(o):o;Zr(t,r-2*vn,n+vn,Q,n+Q,a),Or(t,r-vn+Q/2-3*vn,n+Q/2+dn,1)}}function Or(t,e,r,n){var o=3*vn,a=[],l=[];a[0]=e,a[1]=e+n,a[2]=e+4*vn*n,a[3]=e+n,a[4]=e,l[0]=r-o,l[1]=r-o,l[2]=r,l[3]=r+o,l[4]=r+o,function(t,e,r){t.beginPath(),t.moveTo(e[0]+dn,r[0]+dn);for(var n=1;n<5;n++)t.lineTo(e[n]+dn,r[n]+dn);t.closePath(),t.fillStyle="white",t.strokeStyle="black",t.fill(),t.lineWidth=gn,t.stroke()}(t,a,l)}function Qr(t,e,r,n,o){t.lineWidth=gn,t.beginPath(),t.rect(e+dn,r+dn,n-1,o-1),t.fillStyle="white",t.fill(),t.strokeStyle="black",t.stroke()}function Zr(t,e,r,n,o,a){t.lineWidth=gn,t.beginPath(),t.rect(e+dn,r+dn,n-1,o-1),t.fillStyle=a,t.fill(),t.strokeStyle="black",t.stroke()}function Nr(t,e,r,n){t.beginPath(),t.moveTo(e[0],r[0]),t.lineTo(e[1],r[1]),t.lineTo(e[2],r[2]),t.lineTo(e[3],r[3]),t.closePath(),t.strokeStyle=n,t.lineWidth=.7*vn,t.stroke()}function Hr(t,e,r,n){t.beginPath(),t.moveTo(e[0],r[0]),t.lineTo(e[1],r[1]),t.lineTo(e[2],r[2]),t.lineTo(e[3],r[3]),t.closePath(),t.fillStyle=n,t.fill()}var Gr,Kr,jr=[[0,1,2,3],[3,0,1,2],[2,3,0,1],[1,2,3,0]];function Jr(t,e,r,n,o,a){var l=[],i=[];if(2!=Ft||"#ffffff"!=a){for(var f=0;f<4;f++)l[f]=Math.floor(e[f]+.05*(e[jr[2][f]]-e[f])),i[f]=Math.floor(r[f]+.05*(r[jr[2][f]]-r[f]));0==n&&(o=(o+1)%4),4==n&&(o=(o+3)%4);var u=jr[o][0],c=jr[o][1],s=jr[o][2],h=jr[o][3],v=.26*(l[s]-l[c]),d=.26*(i[s]-i[c]),g=(l[u]-l[c])/2,m=i[c]+(i[u]-i[c])/2,b=i[s]+(i[h]-i[s])/2,M=(l[h]-l[s])/2,p=1^o;t.fillStyle=a,t.beginPath(),t.moveTo(l[u]+(l[h]-l[u])/2,i[u]+(i[h]-i[u])/2),t.lineTo(l[p]+g,m),t.lineTo(l[p]+v+g,m+d),t.lineTo(l[p]+v,i[p]+d),p=(p+1)%4,t.lineTo(l[p]-v,i[p]-d),t.lineTo(l[p]-v+M,b-d),t.lineTo(l[p]+M,b),t.closePath(),t.fill(),t.lineWidth=.6*vn,t.strokeStyle="black",t.stroke()}}function Vr(t){return"white"==t?"#FFFFFF":"black"==t?"#000000":"#808080"}function $r(t){return"#"!=t.substring(0,1)&&(t=Vr(t)),(299*parseInt(t.substring(1,3),16)+587*parseInt(t.substring(3,5),16)+114*parseInt(t.substring(5,7),16))/1e3}function _r(t){"#"!=t.substring(0,1)&&(t=Vr(t));var e=parseInt(t.substring(1,3),16),r=parseInt(t.substring(3,5),16),n=parseInt(t.substring(5,7),16);return Cr(e=Math.floor(.7*e),r=Math.floor(.7*r),n=Math.floor(.7*n))}function tn(t,e){if(t>_t)setTimeout(tn,0,t,e);else{if(!S&&(0==vt.length||0==vt[P].length))return w=!1,Mt=!0,void ur();if(!Y){for(var r=vt[P];C<r.length;){if(r[C]>=1e3)q=r[C]-1e3;else if(-1!=r[C]){var n=r[C]%4+1,o=Math.floor(r[C]/4)%6,a=Math.floor(r[C]/24);ve(J,a,4==n?2:n,o)}C++}return w=!1,Mt=!0,ur(),void _t++}var l,i,f,g,b,M,k=e;!1,requestAnimationFrame((function t(){if(A){if(A=!1,M=!1,p)k>0?C>=r.length&&(C=0,Jt(r)):(q=-1,0==C&&(C=r.length));else if(k>0&&C>=r.length||k<0&&0==C)return m=!1,w=!1,_t++,Mt=!0,void ur();w=!0,Mt=!0}if(R&&(R=!1,k<0&&(x=!1,0==C?(x=!0,D=!0):C--),!x)){if(T=!1,-1==r[C]){if(ur(),!W)for(l=Date.now();Date.now()-l<1e3;);}else r[C]>=1e3?q=k>0?r[C]-1e3:-1:T=!0;if(T){n=r[C]%4+1,o=Math.floor(r[C]/4)%6;var e=n<3;if(4==n&&(n=2),k<0&&(e=!e,n=4-n),a=Math.floor(r[C]/24),L=!1,ht=!0,y=!0,h=0,at[a]>0&&(e=!e),Y){b=Math.PI/2,g=e?1:-1;var E=67*v;2==n&&(b=Math.PI,E=67*d),L=!0,u=a,c=o,he(a),l=Date.now(),i=l,f=g*b/E,s=0}}else F=!0}x||(T&&(Y&&s*g<b?(ur(),m&&(F=!0),i=Date.now(),s=f*(i-l)):F=!0),F&&(F=!1,R=!0,T&&(s=0,L=!1,ht=!0,ve(J,a,n,o),y=!1,Y&&ur(),W&&(M=!0)),k>0?(++C<r.length&&r[C]>=1e3&&(q=r[C]-1e3,C++),C==r.length&&(S?function(t){C=0;for(var e=0;e<6;e++)for(var r=0;r<9;r++)J[e][r]=$[e][r],V[e][r]=_[e][r];gt.length>0&&void 0!==gt[P]&&Vt(J,gt[P],0,gt[P].length,!1);mt.length>0&&void 0!==mt[P]&&Vt(J,mt[P],0,mt[P].length,!0);Jt(t)}(r):D=!0)):q=-1,(m||M)&&(D=!0)));if(D)return D=!1,A=!0,$t<=_t+1&&(w=!1),Mt=!0,0==pt&&re(),ur(),S&&(re(),S=!1),m=!1,_t++,void(1==C&&r[0]>=1e3&&C--);requestAnimationFrame(t)}));var T=!1,A=!0,R=!0,F=!1,D=!1,x=!1;r=S?dt[0]:vt[P]}}document.addEventListener("touchstart",fn),document.addEventListener("touchmove",Ln,{passive:!1}),document.addEventListener("touchend",ln),document.addEventListener("mousedown",fn),document.addEventListener("mousemove",Ln),document.addEventListener("mouseup",ln),document.addEventListener("contextmenu",Tn);var en=!1,rn=!0,nn=document.getElementsByTagName("div"),on=nn.length>0&&"wrap"==nn[0].className;function an(t){on?nn[0].style.overflow=t:document.body.style.overflow=t}function ln(t){if(en&&void 0!==t.touches&&(t.preventDefault(),an("auto")),en?setTimeout((function(){rn=!0}),100):rn=!0,en=!1,T=!1,Z)Z=!1,Mt=!0,ur();else if(L&&!y){L=!1,h+=s,s=0;for(var e=h;e<0;)e+=32*Math.PI;var r=Math.floor(8*e/Math.PI)%16;(wt||r%4==0||r%4==3)&&(r=Math.floor((r+2)/4),at[u]>0&&(r=(4-r)%4),h=0,ht=!0,ve(J,u,r,c)),ur()}}function fn(t){var e=sn.getBoundingClientRect(),r=Math.floor(e.left),n=Math.floor(e.top);if(void 0===t.touches)var o=t.clientX,a=t.clientY;else o=t.touches[0].clientX,a=t.touches[0].clientY;o<r||o>r+ye/vn||a<n||a>n+(we+(1==O?Q:0))/vn||(t.preventDefault(),en=!0,rn=!1,void 0!==t.touches&&an("hidden"),Gr=r,Kr=n,Ae=Te=yn(t),Re=Se=wn(t),g=!1,pt=function(t,e){if(0==O)return-1;if(vt.length>1&&t>=ye-2*Q&&t<ye-Q&&e>=0&&e<Q)return 7;if(vt.length>1&&t>=ye-Q&&t<ye&&e>=0&&e<Q)return 8;if(2==O)return t>=0&&t<Q&&e>=we-Q&&e<we?0:-1;if(e<we)return-1;for(var r=0,n=0;n<7;n++){var o=(ye-r)/(7-n);if(t>=r&&t<r+o&&e>=we&&e<we+Q)return n;r+=o}return-1}(Te,Se),pt>=0?(Z=!0,3==pt?w?ee():b=!b:0==pt?At>0&&2==O?1==St?(St=!1,ee(),re()):(St=!0,te(Sr[pt=6])):(ee(),re()):7==pt||8==pt?(ee(),setTimeout(re,20),P=7==pt?P>0?P-1:vt.length-1:P<vt.length-1?P+1:0):te(Sr[pt]),Mt=!0,ur()):kt>0&&vt.length>0&&vt[P].length>0&&Se>we-kt&&Se<=we?k&&(ee(),un($t++)):(b&&(Ae=Te=ye-Te),void 0===t.touches?!M||w||0!=t.button||t.shiftKey||(g=!0):M&&!w&&(g=!0)))}function un(t){if(t>_t)setTimeout(un,0,t);else{var e=Ht(vt[P]),r=Math.floor(((Te-1)*e*2/(ye-2)+1)/2);(r=Math.max(0,Math.min(e,r)))>0&&(r=Gt(vt[P],r)),r>C&&Vt(J,vt[P],C,r-C,!1),r<C&&Vt(J,vt[P],r,C-r,!0),C=r,T=!0,ur(),w=!1,_t++}}var cn,sn,hn,vn,dn,gn,mn,bn,Mn,pn,kn=[];function Ln(t){if(en&&!Z){if(void 0!==t.touches&&t.preventDefault(),T){ee();var e=Ht(vt[P]),r=Math.floor(((yn(t)-1)*e*2/(ye-2)+1)/2);return(r=Math.max(0,Math.min(e,r)))>0&&(r=Gt(vt[P],r)),r>C&&Vt(J,vt[P],C,r-C,!1),r<C&&Vt(J,vt[P],r,C-r,!0),C=r,void ur()}var n=b?ye-yn(t):yn(t),o=wn(t),a=n-Te,l=o-Se;if(M&&g&&!L&&!w){Ae=n,Re=o;for(var i=0;i<Fe;i++){var f=Ue[i][0],h=Ue[i][1]-f,v=Ue[i][3]-f,d=Pe[i][0],m=Pe[i][1]-d,p=Pe[i][3]-d,k=(p*(Te-f)-v*(Se-d))/(h*p-v*m),y=(-m*(Te-f)+h*(Se-d))/(h*p-v*m);if(k>0&&k<1&&y>0&&y<1){if(a*a+l*l<144)return;if(Be=Ce[i],Ie=Xe[i],Math.abs(Be*a+Ie*l)/Math.sqrt((Be*Be+Ie*Ie)*(a*a+l*l))>.75){L=!0,u=qe[i],c=Oe[i];break}}}g=!1,Te=Ae,Se=Re}a=(n-Te)/vn,l=(o-Se)/vn,!L||w?(Rr(xr(lt,Fr(Ar(kn,it),-.016*a))),Rr(Br(it,ft,lt)),Rr(xr(lt,Fr(Ar(kn,ft),.016*l))),Rr(Br(ft,lt,it)),Te=n,Se=o):(ht&&he(u),s=.03*(Be*a+Ie*l)/Math.sqrt(Be*Be+Ie*Ie)),ur()}}function yn(t){return void 0===t.touches?(t.clientX-Gr)*vn:(t.touches[0].clientX-Gr)*vn}function wn(t){return void 0===t.touches?(t.clientY-Kr)*vn:(t.touches[0].clientY-Kr)*vn}function Tn(t){rn||t.preventDefault()}function Sn(){clearTimeout(cn),cn=setTimeout((function(){An(),Mt=!0,ur()}),20)}function An(){we=pn.clientHeight-1,ye=pn.clientWidth-1,sn.style.width=ye+"px",sn.style.height=we+"px",vn=devicePixelRatio,dn=vn/2,we=Math.floor(we*vn),ye=Math.floor(ye*vn),sn.width=ye,sn.height=we,gn=vn,Q=Math.floor(mn*vn),kt=Math.floor(bn*vn),Lt=Math.floor(Mn*vn);for(var t=1;t<10;t++)zr[t]=t*vn;for(t=0;t<yr.length;t++)wr[t]=yr[t]*vn;1==O&&(we-=Q)}function Rn(t,e){var r,n,o=["R","L","F","B","U","D"],a=["","m","n"],l=["","2","'"],i=-1,f=-1,u=-1,c="";0==e&&(e=10*t);for(var s=0;s<e;s++){for(;i==f||Math.floor(i/2)==Math.floor(f/2)&&i==u;)i=Math.floor(6*Math.random());u=f,f=i,r=Math.floor(3*Math.random()),t<=3?c+=""+o[i]+l[r]+" ":(n=Math.floor(Math.random()*(t>4?3:2)),5==t&&1==n&&(n=0),c+=""+o[i]+a[n]+l[r]+" ")}return c}window.addEventListener("resize",Sn);var Fn=[];function Dn(){ee(),document.removeEventListener("touchstart",fn),document.removeEventListener("touchmove",Ln),document.removeEventListener("touchend",ln),document.removeEventListener("mousedown",fn),document.removeEventListener("mousemove",Ln),document.removeEventListener("mouseup",ln),document.removeEventListener("contextmenu",Tn),window.removeEventListener("resize",Sn)}!function(){sn=document.createElement("canvas"),void 0!==t&&function(){for(var e=t.split("&"),r=0;r<e.length;r++){var n=e[r].split("=");void 0!==n[1]&&(Fn[n[0]]=decodeURIComponent(n[1].trim()))}}();var e=Ut("id");if(null!=e)(pn=document.getElementById(e)).innerHTML="";else if(null!=document.currentScript)pn=document.currentScript.parentNode;else{var r=document.getElementsByTagName("script"),n=r[r.length-1];pn=n.parentNode}null!=pn.id&&"undefined"!=typeof removeListeners&&(removeListeners[pn.id]=Dn);for(var o=0;o<6;o++)J[o]=[],V[o]=[],$[o]=[],_[o]=[];for(o=0;o<18;o++)Ue[o]=[],Pe[o]=[];P=0,h=0,Bt()}()}